{"ast":null,"code":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"exports\", \"lodash/isEqual\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require(\"lodash/isEqual\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.isEqual);\n    global.apiField = mod.exports;\n  }\n})(this, function (_exports, _isEqual) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.default = apiField;\n  _isEqual = _interopRequireDefault(_isEqual);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n        }));\n      }\n\n      ownKeys.forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function apiField(params, api) {\n    var formName = params.formName,\n        state = params.formState,\n        notifyWatchers = params.notifyWatchers,\n        watch = params.watch;\n\n    api.getFieldMeta = function (field, meta) {\n      var allMeta = state.fields[field] ? state.fields[field].meta : {};\n      return meta ? allMeta[meta] : allMeta;\n    };\n\n    api.getFieldValue = function (field) {\n      return api.getDeepData(\"values.\".concat(field));\n    };\n\n    api.watchFieldMeta = function (field, listener) {\n      return watch(\"\".concat(formName, \"/field/\").concat(field, \"/meta\"), listener);\n    };\n\n    api.notifyFieldMetaWatchers = function (field) {\n      return notifyWatchers(\"\".concat(formName, \"/field/\").concat(field, \"/meta\"), api.getFieldMeta(field));\n    };\n\n    api.changeFieldMeta = function (field, meta, value) {\n      if (typeof meta === 'string') {\n        if (!(0, _isEqual.default)(api.getFieldMeta(field)[meta], value)) {\n          state.fields[field].meta = _objectSpread({}, state.fields[field].meta, _defineProperty({}, meta, value));\n          api.notifyFieldMetaWatchers(field);\n        }\n      } else if (Object.keys(meta).some(function (key) {\n        return !(0, _isEqual.default)(api.getFieldMeta(field)[key], meta[key]);\n      })) {\n        state.fields[field].meta = _objectSpread({}, state.fields[field].meta, meta);\n        api.notifyFieldMetaWatchers(field);\n      }\n    };\n\n    api.watchFieldValue = function (field, listener) {\n      return watch(\"\".concat(formName, \"/field/\").concat(field, \"/value\"), listener);\n    };\n\n    api.notifyFieldValueWatchers = function (field) {\n      return notifyWatchers(\"\".concat(formName, \"/field/\").concat(field, \"/value\"), api.getFieldValue(field));\n    };\n\n    api.updateFieldErrors = function (errors) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          extraFieldMeta = _ref.extraFieldMeta,\n          isServerSideError = _ref.isServerSideError,\n          fieldJustChanged = _ref.fieldJustChanged;\n\n      api.forEachField(function (field) {\n        if (!api.getFieldMeta(field, 'isServerSideError') || field === fieldJustChanged) {\n          var payload = _objectSpread({}, extraFieldMeta);\n\n          var fieldErrors = errors ? errors[field] : undefined;\n\n          if (fieldErrors) {\n            payload.invalid = true;\n            payload.error = fieldErrors;\n            payload.isServerSideError = isServerSideError;\n          } else {\n            payload.invalid = false;\n            payload.error = undefined;\n          }\n\n          api.changeFieldMeta(field, payload);\n        }\n      });\n    }; // Validation API\n\n\n    api.validateForm = function () {\n      var extraFieldMeta = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var validator = api.getDeepData('props.validate');\n\n      if (typeof validator === 'function') {\n        var _ref2 = validator(api.getFormValues()) || {},\n            errors = _ref2.errors,\n            rest = _objectWithoutProperties(_ref2, [\"errors\"]);\n\n        api.updateFieldErrors(errors, {\n          extraFieldMeta: extraFieldMeta\n        });\n\n        if (errors && Object.values(errors).some(function (err) {\n          return err;\n        })) {\n          return _objectSpread({\n            errors: errors\n          }, rest);\n        }\n      } else {\n        api.forEachField(function (field) {\n          if (!api.getFieldMeta(field, 'visited')) {\n            api.changeFieldMeta(field, {\n              visited: true\n            });\n          }\n        });\n      }\n    };\n\n    api.registerField = function (field) {\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      state.fields[field] = {\n        lastAsyncValidation: {},\n        meta: {},\n        props: props\n      }; // syncValidateField(field);\n\n      return function () {// @TODO: Decide about unregistering fields\n      };\n    };\n\n    api.changeFieldValue = function (field, value) {\n      state.fields[field].meta.isServerSideError = false;\n\n      if (typeof value === 'function') {\n        api.setDeepData(\"values.\".concat(field), value(api.getFieldValue(field), api.getFormValues()));\n      } else {\n        api.setDeepData(\"values.\".concat(field), value);\n      }\n\n      api.validateForm();\n      api.notifyFieldValueWatchers(field);\n      api.notifyFormValuesWatchers();\n\n      if (api.getDeepData('props.visitOnChange') && !api.getFieldMeta(field, 'visited')) {\n        api.changeFieldMeta(field, {\n          visited: true\n        });\n      }\n    };\n\n    api.focusField = function (field) {\n      if (!api.getFieldMeta(field, 'active')) {\n        api.changeFieldMeta(field, {\n          active: true\n        });\n      }\n    };\n\n    api.blurField = function (field) {\n      var payload = {};\n\n      if (api.getDeepData('props.visitOnBlur') && !api.getFieldMeta(field, 'visited')) {\n        payload.visited = true;\n      }\n\n      if (api.getFieldMeta(field, 'active')) {\n        payload.active = false;\n      }\n\n      if (Object.keys(payload).length > 0) {\n        api.changeFieldMeta(field, payload);\n      }\n    };\n\n    api.forEachField = function (callback) {\n      var fields = Object.keys(api.getFlatData('fields'));\n\n      for (var i = 0; i < fields.length; i++) {\n        callback(fields[i]);\n      }\n    };\n  }\n});","map":{"version":3,"sources":["/home/xim/Documents/Master/twitter-app/front-end/node_modules/react-hooks-form/es/store/api.field.js"],"names":["global","factory","define","amd","exports","require","mod","isEqual","apiField","_exports","_isEqual","Object","defineProperty","value","default","_interopRequireDefault","obj","__esModule","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","keys","_objectSpread","arguments","ownKeys","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","_defineProperty","configurable","writable","params","api","formName","state","formState","notifyWatchers","watch","getFieldMeta","field","meta","allMeta","fields","getFieldValue","getDeepData","watchFieldMeta","listener","notifyFieldMetaWatchers","changeFieldMeta","some","watchFieldValue","notifyFieldValueWatchers","updateFieldErrors","errors","_ref","undefined","extraFieldMeta","isServerSideError","fieldJustChanged","forEachField","payload","fieldErrors","invalid","error","validateForm","validator","_ref2","getFormValues","rest","values","err","visited","registerField","props","lastAsyncValidation","changeFieldValue","setDeepData","notifyFormValuesWatchers","focusField","active","blurField","callback","getFlatData"],"mappings":"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","sourcesContent":["(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"exports\", \"lodash/isEqual\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require(\"lodash/isEqual\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.isEqual);\n    global.apiField = mod.exports;\n  }\n})(this, function (_exports, _isEqual) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.default = apiField;\n  _isEqual = _interopRequireDefault(_isEqual);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\n  function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function apiField(params, api) {\n    var formName = params.formName,\n        state = params.formState,\n        notifyWatchers = params.notifyWatchers,\n        watch = params.watch;\n\n    api.getFieldMeta = function (field, meta) {\n      var allMeta = state.fields[field] ? state.fields[field].meta : {};\n      return meta ? allMeta[meta] : allMeta;\n    };\n\n    api.getFieldValue = function (field) {\n      return api.getDeepData(\"values.\".concat(field));\n    };\n\n    api.watchFieldMeta = function (field, listener) {\n      return watch(\"\".concat(formName, \"/field/\").concat(field, \"/meta\"), listener);\n    };\n\n    api.notifyFieldMetaWatchers = function (field) {\n      return notifyWatchers(\"\".concat(formName, \"/field/\").concat(field, \"/meta\"), api.getFieldMeta(field));\n    };\n\n    api.changeFieldMeta = function (field, meta, value) {\n      if (typeof meta === 'string') {\n        if (!(0, _isEqual.default)(api.getFieldMeta(field)[meta], value)) {\n          state.fields[field].meta = _objectSpread({}, state.fields[field].meta, _defineProperty({}, meta, value));\n          api.notifyFieldMetaWatchers(field);\n        }\n      } else if (Object.keys(meta).some(function (key) {\n        return !(0, _isEqual.default)(api.getFieldMeta(field)[key], meta[key]);\n      })) {\n        state.fields[field].meta = _objectSpread({}, state.fields[field].meta, meta);\n        api.notifyFieldMetaWatchers(field);\n      }\n    };\n\n    api.watchFieldValue = function (field, listener) {\n      return watch(\"\".concat(formName, \"/field/\").concat(field, \"/value\"), listener);\n    };\n\n    api.notifyFieldValueWatchers = function (field) {\n      return notifyWatchers(\"\".concat(formName, \"/field/\").concat(field, \"/value\"), api.getFieldValue(field));\n    };\n\n    api.updateFieldErrors = function (errors) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          extraFieldMeta = _ref.extraFieldMeta,\n          isServerSideError = _ref.isServerSideError,\n          fieldJustChanged = _ref.fieldJustChanged;\n\n      api.forEachField(function (field) {\n        if (!api.getFieldMeta(field, 'isServerSideError') || field === fieldJustChanged) {\n          var payload = _objectSpread({}, extraFieldMeta);\n\n          var fieldErrors = errors ? errors[field] : undefined;\n\n          if (fieldErrors) {\n            payload.invalid = true;\n            payload.error = fieldErrors;\n            payload.isServerSideError = isServerSideError;\n          } else {\n            payload.invalid = false;\n            payload.error = undefined;\n          }\n\n          api.changeFieldMeta(field, payload);\n        }\n      });\n    }; // Validation API\n\n\n    api.validateForm = function () {\n      var extraFieldMeta = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var validator = api.getDeepData('props.validate');\n\n      if (typeof validator === 'function') {\n        var _ref2 = validator(api.getFormValues()) || {},\n            errors = _ref2.errors,\n            rest = _objectWithoutProperties(_ref2, [\"errors\"]);\n\n        api.updateFieldErrors(errors, {\n          extraFieldMeta: extraFieldMeta\n        });\n\n        if (errors && Object.values(errors).some(function (err) {\n          return err;\n        })) {\n          return _objectSpread({\n            errors: errors\n          }, rest);\n        }\n      } else {\n        api.forEachField(function (field) {\n          if (!api.getFieldMeta(field, 'visited')) {\n            api.changeFieldMeta(field, {\n              visited: true\n            });\n          }\n        });\n      }\n    };\n\n    api.registerField = function (field) {\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      state.fields[field] = {\n        lastAsyncValidation: {},\n        meta: {},\n        props: props\n      }; // syncValidateField(field);\n\n      return function () {// @TODO: Decide about unregistering fields\n      };\n    };\n\n    api.changeFieldValue = function (field, value) {\n      state.fields[field].meta.isServerSideError = false;\n\n      if (typeof value === 'function') {\n        api.setDeepData(\"values.\".concat(field), value(api.getFieldValue(field), api.getFormValues()));\n      } else {\n        api.setDeepData(\"values.\".concat(field), value);\n      }\n\n      api.validateForm();\n      api.notifyFieldValueWatchers(field);\n      api.notifyFormValuesWatchers();\n\n      if (api.getDeepData('props.visitOnChange') && !api.getFieldMeta(field, 'visited')) {\n        api.changeFieldMeta(field, {\n          visited: true\n        });\n      }\n    };\n\n    api.focusField = function (field) {\n      if (!api.getFieldMeta(field, 'active')) {\n        api.changeFieldMeta(field, {\n          active: true\n        });\n      }\n    };\n\n    api.blurField = function (field) {\n      var payload = {};\n\n      if (api.getDeepData('props.visitOnBlur') && !api.getFieldMeta(field, 'visited')) {\n        payload.visited = true;\n      }\n\n      if (api.getFieldMeta(field, 'active')) {\n        payload.active = false;\n      }\n\n      if (Object.keys(payload).length > 0) {\n        api.changeFieldMeta(field, payload);\n      }\n    };\n\n    api.forEachField = function (callback) {\n      var fields = Object.keys(api.getFlatData('fields'));\n\n      for (var i = 0; i < fields.length; i++) {\n        callback(fields[i]);\n      }\n    };\n  }\n});"]},"metadata":{},"sourceType":"script"}